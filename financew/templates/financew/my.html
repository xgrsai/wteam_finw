{% extends 'financew/base.html' %} {% block content %} 
{% for budget in budgets%}<!-- воно бере по назві ключа -->
<li>
  <a href="{% url 'financew:budget' budget.id %}"
    >{{ budget.name }} {{ budget.amount }} {{ budget.currency }}</a
  >
</li>
{% empty %}
<li>Бюджети не знайдено</li>
{% endfor %}


<!-- Кнопка для додавання нового бюджету -->
<button id="add-budget-btn">Додати новий бюджет</button>
<!-- Форма для додавання нового бюджету (спочатку прихована) -->
<div id="add-budget-form" style="display: none">
  <form action="{% url 'financew:my' %}" method="post">
    <!-- action - куди відправляється форма-->
    {% csrf_token %}
    <!--токен CSRF, який додається до кожної форми, що дозволяє серверу перевіряти, чи запит дійсно надійшов з авторизованого джерела (тобто з вашого веб-сайту, а не з якогось іншого, створеного зловмисником).-->
    {% comment %} {{ form.as_p }} {% endcomment %} {% comment %} {{form.as_div}}
    {% endcomment %}

    <div class="form-group" style="border: 2px solid red; padding: 10px">
      <label for="{{ form.name.id_for_label }}">{{ form.name.label }}</label>
      {{ form.name }}
    </div>

    <div class="form-group" style="border: 2px solid red; padding: 10px">
      <label for="{{ form.amount.id_for_label }}"
        >{{ form.amount.label }}</label
      >
      {{ form.amount }}
    </div>

    <div class="form-group" style="border: 2px solid red; padding: 10px">
      <label for="{{ form.currency.id_for_label }}"
        >{{ form.currency.label }}</label
      >
      {{ form.currency }}
    </div>

    <button name="submit">Додати бюджет</button>
    <button id="cancel-btn">Скасувати</button>
  </form>
</div>


{% for goalbudget in goalbudgets%}<!-- воно бере по назві ключа -->
<li>
    {{ goalbudget.name }} {{ goalbudget.amount }} {{ goalbudget.currency }}
</li>
{% empty %}
<li>Бюджети-цілі не знайдено</li>
{% endfor %}
<!-- Кнопка для додавання нового бюджету-цілі -->
<button id="add-goalbudget-btn">Додати нову бюджет-ціль</button>
<!-- Форма для додавання нового бюджету (спочатку прихована) -->
<div id="add-goalbudget-form" style="display: block">
  <form action="{% url 'financew:new_goalbudget' %}" method="post">
    {%csrf_token%}
    {{goalbudget_form.as_div}}

    <button name="submit">Додати бюджет-ціль</button>
    <button id="cancel-btn">Скасувати</button>
  </form>
</div>

  <script>
  // Отримуємо елементи
  const addBudgetBtn = document.getElementById("add-budget-btn");
  const addBudgetForm = document.getElementById("add-budget-form");
  const cancelBtn = document.getElementById("cancel-btn");
  const addGoalBudgetForm = document.getElementById("add-goalbudget-form");
  const addGoalBudgetBtn = document.getElementById("add-goalbudget-btn");
  
  // Показуємо форму для додавання бюджету
  addBudgetBtn.addEventListener("click", function (event) {
    event.preventDefault();
    addBudgetForm.style.display = "block"; // Показуємо форму
    addBudgetBtn.style.display = "none"; // Приховуємо кнопку додавання
  });

  // Скасувати додавання бюджету
  cancelBtn.addEventListener("click", function () {
    addBudgetForm.style.display = "none"; // Приховуємо форму
    addBudgetBtn.style.display = "inline"; // Показуємо кнопку додавання
    addGoalBudgetForm.style.display = "none"; // Приховуємо форму
    addGoalBudgetBtn.style.display = "inline"; // Показуємо кнопку додавання
  });

  // Показуємо форму для додавання бюджету-цілі
  addGoalBudgetBtn.addEventListener("click", function (event) {
    event.preventDefault();
    addGoalBudgetForm.style.display = "block"; // Показуємо форму
    addGoalBudgetBtn.style.display = "none"; // Приховуємо кнопку додавання
  });


</script>

{% endblock content %}
